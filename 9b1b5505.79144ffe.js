(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{128:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/admin_elections_list__create_new_highlighted-1669d7fc9d97d640fb5aa73558cdae0a.png"},129:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/create_new_election-d4a6c75b2b0cf43b788cd92072569721.png"},130:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/create_new_election_last_section-357b84eef0c388fd7363e9f3aabc62bf.png"},131:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/create_new_election_edit_json-00e6dff864e78e5d4266a158e812c662.png"},132:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/files/sample_config-2096c26697f7e17f345268d6a0ba0fcf.yml"},133:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/create_new_election_last_section_checkbox-85740d26fb51af264044c0455f9b6d81.png"},134:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/election_dashboard_registered_create_button_highlighted-94c9df356d5d66bdf9771a69be48f1e5.png"},76:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return r})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return c}));var a=n(3),i=n(7),l=(n(0),n(86)),o={id:"election-creation",title:"Election Creation",sidebar_label:"Election Creation",slug:"/advanced-elections/election-creation"},r={unversionedId:"advanced-elections/election-creation",id:"advanced-elections/election-creation",isDocsHomePage:!1,title:"Election Creation",description:"In the Admin interface, given enough permissions you can create new",source:"@site/docs/advanced-elections/election-creation.md",slug:"/advanced-elections/election-creation",permalink:"/admin-manual/docs/advanced-elections/election-creation",editUrl:"https://github.com/agoravoting/admin-manual/edit/master/docs/advanced-elections/election-creation.md",version:"current",sidebar_label:"Election Creation",sidebar:"mainSidebar",previous:{title:"Introduction",permalink:"/admin-manual/docs/advanced-elections/introduction"},next:{title:"Contribution Guide",permalink:"/admin-manual/docs/contribute/guide"}},s=[{value:"Election JSON settings",id:"election-json-settings",children:[]},{value:"Creating elections",id:"creating-elections",children:[]},{value:"Modifying elections",id:"modifying-elections",children:[]},{value:"Election object",id:"election-object",children:[{value:"Election: <code>id</code>",id:"election-id",children:[]},{value:"Election: <code>title</code>",id:"election-title",children:[]},{value:"Election: <code>description</code>",id:"election-description",children:[]},{value:"Election: <code>start_date</code>",id:"election-start_date",children:[]},{value:"Election: <code>end_date</code>",id:"election-end_date",children:[]},{value:"Election: <code>director</code>",id:"election-director",children:[]},{value:"Election: <code>authorities</code>",id:"election-authorities",children:[]},{value:"Election: <code>presentation</code>",id:"election-presentation",children:[]},{value:"Election: <code>layout</code>",id:"election-layout",children:[]},{value:"Election: <code>num_successful_logins_allowed</code>",id:"election-num_successful_logins_allowed",children:[]},{value:"Election: <code>resultsConfig</code>",id:"election-resultsconfig",children:[]},{value:"Election: <code>has_ballot_boxes</code>",id:"election-has_ballot_boxes",children:[]},{value:"Election: <code>ballot_boxes</code>",id:"election-ballot_boxes",children:[]},{value:"Election: <code>census</code>",id:"election-census",children:[]}]},{value:"Election Presentation Object",id:"election-presentation-object",children:[{value:"Election Presentation: <code>theme</code>",id:"election-presentation-theme",children:[]},{value:"Election Presentation: <code>share_text</code>",id:"election-presentation-share_text",children:[]},{value:"Election Presentation: <code>urls</code>",id:"election-presentation-urls",children:[]},{value:"Election Presentation: <code>theme_css</code>",id:"election-presentation-theme_css",children:[]},{value:"Election Presentation: <code>extra_options</code>",id:"election-presentation-extra_options",children:[]}]},{value:"Share Text Object",id:"share-text-object",children:[{value:"Share Text: <code>network</code>",id:"share-text-network",children:[]},{value:"Share Text: <code>button_text</code>",id:"share-text-button_text",children:[]},{value:"Share Text: <code>social_message</code>",id:"share-text-social_message",children:[]}]},{value:"Election Presentation Extra Options Object",id:"election-presentation-extra-options-object",children:[{value:"Election Presentation Options: <code>start_screen__skip</code>",id:"election-presentation-options-start_screen__skip",children:[]},{value:"Election Presentation Options: <code>public_title</code>",id:"election-presentation-options-public_title",children:[]},{value:"Election Presentation Options: <code>success_screen__hide_ballot_tracker</code>",id:"election-presentation-options-success_screen__hide_ballot_tracker",children:[]},{value:"Election Presentation Options: <code>success_screen__hide_qr_code</code>",id:"election-presentation-options-success_screen__hide_qr_code",children:[]},{value:"Election Presentation Options: <code>success_screen__hide_download_ballot_ticket</code>",id:"election-presentation-options-success_screen__hide_download_ballot_ticket",children:[]},{value:"Election Presentation Options: <code>success_screen__redirect_to_login</code>",id:"election-presentation-options-success_screen__redirect_to_login",children:[]},{value:"Election Presentation Options: <code>success_screen__redirect_to_login__text</code>",id:"election-presentation-options-success_screen__redirect_to_login__text",children:[]},{value:"Election Presentation Options: <code>disable_voting_booth_audit_ballot</code>",id:"election-presentation-options-disable_voting_booth_audit_ballot",children:[]},{value:"Election Presentation Options: <code>success_screen__redirect_to_login__auto_seconds</code>",id:"election-presentation-options-success_screen__redirect_to_login__auto_seconds",children:[]}]},{value:"Results Config Pipes",id:"results-config-pipes",children:[{value:"Election results input",id:"election-results-input",children:[]},{value:"Election results output",id:"election-results-output",children:[]},{value:"Election results can have different questions",id:"election-results-can-have-different-questions",children:[]},{value:"Pipe: <code>do_tallies</code>",id:"pipe-do_tallies",children:[]},{value:"Pipe: <code>sort_non_iterative</code>",id:"pipe-sort_non_iterative",children:[]},{value:"Other pipes",id:"other-pipes",children:[]}]},{value:"Census object",id:"census-object",children:[{value:"Census: <code>voters</code>",id:"census-voters",children:[]},{value:"Census: <code>auth_method</code>",id:"census-auth_method",children:[]},{value:"Census: <code>census</code>",id:"census-census",children:[]},{value:"Census: <code>extra_fields</code>",id:"census-extra_fields",children:[]}]}],b={toc:s};function c(e){var t=e.components,o=Object(i.a)(e,["components"]);return Object(l.b)("wrapper",Object(a.a)({},b,o,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"In the Admin interface, given enough permissions you can create new\nelections using the ",Object(l.b)("inlineCode",{parentName:"p"},"New Election")," buttons highlighted below:"),Object(l.b)("p",null,Object(l.b)("img",{alt:"Highlighted Create New Election Buttons in Admin interface",src:n(128).default})),Object(l.b)("p",null,"Once you click there, you will something like the following, where you can\ngraphically configure the main settings of an election like the election title,\ndescription, etc:"),Object(l.b)("p",null,Object(l.b)("img",{alt:"New Election interface",src:n(129).default})),Object(l.b)("p",null,"Using the left sidebar, you can access other configuration sections like\n",Object(l.b)("inlineCode",{parentName:"p"},"Questions")," or ",Object(l.b)("inlineCode",{parentName:"p"},"Authentication"),". However, it is currently not possible to\ngraphically configure some more advanced election settings. To be able to\nconfigure these advanced, settings, click in the last sidebar item\n",Object(l.b)("inlineCode",{parentName:"p"},"Create Election"),":"),Object(l.b)("p",null,Object(l.b)("img",{alt:"Create Election section",src:n(130).default})),Object(l.b)("p",null,"The ",Object(l.b)("inlineCode",{parentName:"p"},"Create Election")," sidebar section is the last step of election configuration,\nwhere you can review the configuration before creating the election. At this\npoint, the election is configured - with some sample configuration if you\ndidn't change anything."),Object(l.b)("p",null,"If in the ",Object(l.b)("inlineCode",{parentName:"p"},"Create Election")," sidebar section you click in the pencil icon at the\ntop, you will access the ",Object(l.b)("inlineCode",{parentName:"p"},"Edit Election Json")," dialog, in which you can directly\nedit in JSON format the election configuration:"),Object(l.b)("p",null,Object(l.b)("img",{alt:"Edit JSON Dialog",src:n(131).default})),Object(l.b)("h2",{id:"election-json-settings"},"Election JSON settings"),Object(l.b)("p",null,"In this section we will describe the different options that can be configured\nin the Edit JSON Dialog for Election Creation.  You review an example of a\n",Object(l.b)("a",{target:"_blank",href:n(132).default},"sample election JSON configuration here"),"."),Object(l.b)("p",null,"As can be seen in the last screenshot, the JSON Format starts with a list. This\nis a list of ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-object"}),"Elections"),". This means you can directly create\nmultiple elections at once like this:"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json",metastring:'title="multiple_elections.json"',title:'"multiple_elections.json"'}),"[\n  {\n    ...Election 1 configuration..\n  },\n  {\n    ...Election 2 configuration..\n  },\n  {\n    ...Election 3 configuration..\n  },\n]\n")),Object(l.b)("p",null,"Once you click on the ",Object(l.b)("inlineCode",{parentName:"p"},"Finish edit")," in the ",Object(l.b)("inlineCode",{parentName:"p"},"Edit Election Json")," dialog, if you\nhave added multiple elections this will be reflected in the interface."),Object(l.b)("h2",{id:"creating-elections"},"Creating elections"),Object(l.b)("p",null,"In the ",Object(l.b)("inlineCode",{parentName:"p"},"Create election")," sidebar section, you can review (and edit the json) of\nthe election(s) you are about to create in the system. At this point, the\nelections are usually not yet created in the backend and exists only as a JSON\nconfiguration in your web browser. There's an exception to that, that we will\ndiscuss later in this section."),Object(l.b)("p",null,"Election creation compromises multiple steps. As seen in\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-creation-json-settings"}),"Election Creation JSON settings"),"), multiple\nelections can be created at once in the ",Object(l.b)("inlineCode",{parentName:"p"},"Create election")," sidebar section. "),Object(l.b)("p",null,"For each election, the web browser will request in order to execute the\nfollowing steps:"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},Object(l.b)("strong",{parentName:"li"},"Create the AuthEvent"),": An Authevent represents an event which has some\nspecific voter authentication configuration and census of voters."),Object(l.b)("li",{parentName:"ol"},Object(l.b)("strong",{parentName:"li"},"Add the voter census"),": The voter census data is added to the just\nregistered AuthEvent."),Object(l.b)("li",{parentName:"ol"},Object(l.b)("strong",{parentName:"li"},"Register the Election"),": The election is registed in ",Object(l.b)("inlineCode",{parentName:"li"},"agora-elections"),", the\nballot box API.")),Object(l.b)("p",null,"When an election is registered in ",Object(l.b)("inlineCode",{parentName:"p"},"agora-elections"),", the election public keys\nand private are not yet created and no communication with the election\nauthorities has happened yet. At this stage, the election configuration can be\nmodified later on."),Object(l.b)("p",null,"If you look at the ",Object(l.b)("inlineCode",{parentName:"p"},"Create election")," sidebar section, there's a checkbox option\nbelow to choose if just registering the election or also creating it:"),Object(l.b)("p",null,Object(l.b)("img",{alt:"Create Election section checkbox",src:n(133).default})),Object(l.b)("p",null,"This checkbox is checked by default but can be disabled just by clicking on it.\nIf disabled, the elections will just be registered but not created. This allows\nfor changing the elections later on as will be discussed in the next section."),Object(l.b)("p",null,"If the checkbox is checked, then the elections' public and private keys will be\ncreated. This will happen after the previous three steps of AuthEvent creation,\ncensus import and election registration has happened for all the elections. The\ncreation of the public and private keys is the slowest part of the process and\nit takes around 30 seconds for each question with two election authorities."),Object(l.b)("p",null,"Election's public and private keys creation can be requested later when an\nelection is in ",Object(l.b)("inlineCode",{parentName:"p"},"registered")," state by clicking in ",Object(l.b)("inlineCode",{parentName:"p"},"Create")," button from the\nelection dashboard:"),Object(l.b)("p",null,Object(l.b)("img",{alt:"Create button in Election dashboard",src:n(134).default})),Object(l.b)("h2",{id:"modifying-elections"},"Modifying elections"),Object(l.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(l.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"Elections can only be modified in ",Object(l.b)("inlineCode",{parentName:"p"},"agora-elections")," if virtual elections are\nallowed in the deployment configuration, which can be enabled with the\n",Object(l.b)("inlineCode",{parentName:"p"},"config.agora_elections.virtualElectionsAllowed")," setting in the ",Object(l.b)("inlineCode",{parentName:"p"},"config.yml"),"\ndeployment configuration file. This setting is set to ",Object(l.b)("inlineCode",{parentName:"p"},"false")," by default\nbecause for security reasons virtual elections should not be enabled in\nmulti-tenant deployments."))),Object(l.b)("p",null,"When creating and configuring an election and more so if we are perhaps talking\nabout advanced election configuration options set in JSON for a set of multiple\nelections, it's useful to register it but be able to edit it later."),Object(l.b)("p",null,"One straightforward way to do this is having the elections' JSON configuration\nin a file, copy and paste it into the ",Object(l.b)("inlineCode",{parentName:"p"},"Edit Election JSON")," dialog inside the\n",Object(l.b)("inlineCode",{parentName:"p"},"Create election")," sidebar section, and click the ",Object(l.b)("inlineCode",{parentName:"p"},"Create the elections")," button\nwith the checkbox ",Object(l.b)("inlineCode",{parentName:"p"},"Not only register the election, but also create it at the election authorities. This means you won't be able to modify the election.")," unchecked. You will have to\nensure that each election has a specific id assigned in the elections' JSON\nconfiguration."),Object(l.b)("p",null,"Once the elections are registered, you can enter each election dashboard and\nfrom there access the Demo voting booth and see if it works as expected, and\nyou can even start or stop the elections and try to vote to see if the\nauthentication worked. You won't be able to vote and the voting booth will fail\nto encrypt the ballot because at this point the elections' private and public\nkeys are not created yet."),Object(l.b)("p",null,"If there's any detail that you need to change, you can edit the elections JSON\nconfiguration file, and then proceed again to follow the steps before for\ncreating the election: copy and paste the configuration into the\n",Object(l.b)("inlineCode",{parentName:"p"},"Edit Election JSON")," dialog inside the ",Object(l.b)("inlineCode",{parentName:"p"},"Create election")," sidebar section and\nclick again to create the elections. This will update the elections'\nconfiguration as the system will have detected when an election with the\nspecified id already exists and can be edited as it's registered but not created."),Object(l.b)("p",null,"Once the final elections configuration is in place, you can try to follow the\nsame election creation/update procedure, but ensuring the checkbox to create\nthe elections is checked."),Object(l.b)("p",null,"In that case, the elections will first be updated (first the AuthEvent, then the\ncensus, and then the election), and then the public and private keys will be\ncreated."),Object(l.b)("h2",{id:"election-object"},"Election object"),Object(l.b)("p",null,"Within the Election JSON settings that can be set using the ",Object(l.b)("inlineCode",{parentName:"p"},"Edit Election JSON")," dialog, each election can have the following settings:"),Object(l.b)("h3",{id:"election-id"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"id")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"id")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Positive Integer")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"345"))),Object(l.b)("p",null,"Election's unique id. It will automatically be assigned one if none is set. If the election already exists and the user has permissions to edit it, the election configuration will be updated if the election is registered but not yet created (",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#modifying-elections"}),"details here"),")."),Object(l.b)("h3",{id:"election-title"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"title")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"title")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Short String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'"New election"'))),Object(l.b)("p",null,"Election's title. It will appear in the admin election list, and as the election title in the public election site and in the voting booth start screen."),Object(l.b)("h3",{id:"election-description"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"description")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"description")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Long String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'"This is the description of the election. You can add simple html like <strong>bold</strong> or <a href=\\"https://nvotes.com\\">links to websites</a>.\\n\\n<br><br>You need to use two br element for new paragraphs."'))),Object(l.b)("p",null,"Election's description. It will appear below the title in the public election site and in the voting booth start screen. As shown in the example it allows for some basic HTML."),Object(l.b)("h3",{id:"election-start_date"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"start_date")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"start_date")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'""'))),Object(l.b)("p",null,"DEPRECATED. This field is required but should really be an empty string as it is currently unused."),Object(l.b)("h3",{id:"election-end_date"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"end_date")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"end_date")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'""'))),Object(l.b)("p",null,"DEPRECATED. This field is required but should really be an empty string as it is currently unused."),Object(l.b)("h3",{id:"election-director"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"director")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"director")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'"auth1"'))),Object(l.b)("p",null,"The name of the election authority that will act as the director for this election. Its eopackage needs to be installed in the backend server (",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"../deployment/guide#connecting-web-servers-with-authorities"}),"see details"),")."),Object(l.b)("h3",{id:"election-authorities"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"authorities")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"authorities")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"List<String>")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'["auth2", "auth3"]'))),Object(l.b)("p",null,"List of names of all the election authorities that should be included in this election, excluding the director authority name. Its eopackages needs to be installed in the backend server (",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"../deployment/guide#connecting-web-servers-with-authorities"}),"see details"),")."),Object(l.b)("h3",{id:"election-presentation"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"presentation")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"presentation")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"#election-presentation-object"}),"Election Presentation")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n      "theme": "default",\n      "share_text": [\n        {\n          "network": "Twitter",\n          "button_text": "",\n          "social_message": "I have just voted in election __URL__, you can too! #nvotes"\n        },\n        {\n          "network": "Facebook",\n          "button_text": "",\n          "social_message": "__URL__"\n        }\n      ],\n      "urls": [],\n      "theme_css": ""\n    }\n')),Object(l.b)("p",null,"Describes presentation options related to the whole election. See\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-presentation-object"}),"Election Presentation")," for more details."),Object(l.b)("h3",{id:"election-layout"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"layout")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"layout")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'"simple"'))),Object(l.b)("p",null,"Specifies the election-wide layout. For now this settings remains unused and it\nmust always be set to ",Object(l.b)("inlineCode",{parentName:"p"},'"simple"'),"."),Object(l.b)("h3",{id:"election-num_successful_logins_allowed"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"num_successful_logins_allowed")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"num_successful_logins_allowed")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Positive Integer")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"0"))),Object(l.b)("p",null,"Specifies the number of votes that can be cast, because ",Object(l.b)("em",{parentName:"p"},"successful logins")," is\na generic and fancy way to call 'votes cast' in a generic way within AuthApi.\nIf set to zero, no specific limitation in ",Object(l.b)("inlineCode",{parentName:"p"},"authapi")," will happen regarding the\nauthentication process. If set to a number higher than zero, for example 1 or 3,\nthat will be the limit in the number of votes that can be cast."),Object(l.b)("p",null,"Once the limitation is hit, the voter won't be able to authenticate again to\ncast a vote."),Object(l.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"There might be other limitations on the number of votes that a voter can cast.\nFor example ",Object(l.b)("inlineCode",{parentName:"p"},"agora-elections")," has a deployment level configuration setting\nthat limits the number of votes that can be cast (this setting's path is\n",Object(l.b)("inlineCode",{parentName:"p"},"config.agora_elections.max_revotes")," in the ",Object(l.b)("inlineCode",{parentName:"p"},"config.yml")," ansible configuration).\nThis ",Object(l.b)("inlineCode",{parentName:"p"},"agora-elections")," configuration setting will be applied independently of\n",Object(l.b)("inlineCode",{parentName:"p"},"num_successful_logins_allowed"),"."))),Object(l.b)("h3",{id:"election-resultsconfig"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"resultsConfig")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"resultsConfig")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," List<",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"#results-config-pipes"}),"Results Config Pipes"),">"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:"))),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'[\n  [\n    "agora_results.pipes.results.do_tallies",\n    {\n      "ignore_invalid_votes": true\n    }\n  ],\n  [\n    "agora_results.pipes.sort.sort_non_iterative",\n    {\n      "question_indexes": [0]\n    }\n  ]\n]\n')),Object(l.b)("p",null,"Specifies how election results will be calculated. It is set of pipes to be\napplied, together with each pipe configuration, that will be used during the\ncalculation of election results. See ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#results-config-pipes"}),"Results Config Pipes"),"\nfor more details."),Object(l.b)("h3",{id:"election-has_ballot_boxes"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"has_ballot_boxes")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"has_ballot_boxes")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Boolean")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},"false")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"true"))),Object(l.b)("p",null,"Specifies if this election will have paper ballot boxes. If set to ",Object(l.b)("inlineCode",{parentName:"p"},"true"),", the\nelection will show a new ",Object(l.b)("inlineCode",{parentName:"p"},"Balot Boxes")," tab in the sidebar once created. In that\ntab a list of ballot boxes will be shown, and each ballot box will be able to\nhave a tally sheet attached. This can be used for hybrid elections with both\ndigital votes and paper ballots. "),Object(l.b)("p",null,"A single election can have multiple ballot boxes assigned to it. Each ballot\nbox can be assigned via the ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-ballot_boxes"}),Object(l.b)("inlineCode",{parentName:"a"},"ballot_boxes"))," election\nobject property."),Object(l.b)("p",null,"The way election results are calculated when there are ballot boxes is through\nmultiple steps:"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"When a tally sheet is uploaded (to ",Object(l.b)("inlineCode",{parentName:"li"},"authapi"),"), ",Object(l.b)("inlineCode",{parentName:"li"},"authapi")," sends a callback to\n",Object(l.b)("inlineCode",{parentName:"li"},"agora-elections")," (the API call is to\n",Object(l.b)("inlineCode",{parentName:"li"},"/api/election/:id/update-ballot-boxes-config"),") with the updated list of\ntally sheets related to that election."),Object(l.b)("li",{parentName:"ol"},"That API call to ",Object(l.b)("inlineCode",{parentName:"li"},"/api/election/:id/update-ballot-boxes-config")," of\n",Object(l.b)("inlineCode",{parentName:"li"},"agora-elections")," executes multiple steps:",Object(l.b)("ol",{parentName:"li"},Object(l.b)("li",{parentName:"ol"},"It sets the ",Object(l.b)("inlineCode",{parentName:"li"},"ballotBoxesResultsConfig")," in the appropiate election and\nsaves it in the database."),Object(l.b)("li",{parentName:"ol"},"It uses the ",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"#election-resultsconfig"}),"resultsConfig setting")," as a\ntemplate replacing any ocurrence of the text\n",Object(l.b)("inlineCode",{parentName:"li"},"__ballotBoxesResultsConfig__")," with the content of\n",Object(l.b)("inlineCode",{parentName:"li"},"ballotBoxesResultsConfig")," which is the updated list of tally sheets. If\nballotBoxesResultsConfig is not set, then ",Object(l.b)("inlineCode",{parentName:"li"},"__ballotBoxesResultsConfig__"),"\nwill be always replaced by ",Object(l.b)("inlineCode",{parentName:"li"},"[]")," (empty list)."),Object(l.b)("li",{parentName:"ol"},"It re-calculates the election results running ",Object(l.b)("inlineCode",{parentName:"li"},"agora-results")," with the\ncalculated ",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"#election-resultsconfig"}),"resultsConfig setting")," in the previous\nstep.")))),Object(l.b)("p",null,"As a result, if you want the tally sheets to be reflected somehow in the\nelection results, you will need to use the appropiate\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#results-config-pipes"}),"Results Config Pipes"),", for example ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/ballot_boxes.py#L278"}),"agora_results.pipes.ballot_boxes.count_tally_sheets"),". See also ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-results-can-have-different-questions"}),"Election results can have different questions")," section."),Object(l.b)("h3",{id:"election-ballot_boxes"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"ballot_boxes")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"ballot_boxes")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"List<Short String>")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},"[]")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'["Postal Ballots", "Onsite Paper Ballots"]'))),Object(l.b)("p",null,"This configuration option is only used if\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-has_ballot_boxes"}),"has_ballot_boxes")," is set to true. It contains a\nlist of ballot boxes to be created."),Object(l.b)("h3",{id:"election-census"},"Election: ",Object(l.b)("inlineCode",{parentName:"h3"},"census")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"census")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," List<",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"#census-object"}),"Census"),">"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:"))),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "voters": [],\n  "auth_method": "email",\n  "census": "close",\n  "extra_fields": [],\n  "admin_fields": [],\n  "config": {\n    "allow_user_resend": true,\n    "msg": "Vote in __URL__ with code __CODE__",\n    "subject": "Vote now with nVotes",\n    "authentication-action": {\n      "mode": "vote",\n      "mode-config": {\n        "url": ""\n      }\n    },\n    "registration-action": {\n      "mode": "vote",\n      "mode-config": null\n    }\n  }\n}\n')),Object(l.b)("p",null,"Object that details the different options related to the census configuration.\nSee ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#census-object"}),"Census")," for more details."),Object(l.b)("h2",{id:"election-presentation-object"},"Election Presentation Object"),Object(l.b)("p",null,"This JSON object type describes presentation options related to the whole\nelection. It is used ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-presentation"}),"here")," and can have the following\nproperties:"),Object(l.b)("h3",{id:"election-presentation-theme"},"Election Presentation: ",Object(l.b)("inlineCode",{parentName:"h3"},"theme")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"theme")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'"default"'))),Object(l.b)("p",null,"Theme that will be used in the public election website and in the voting booth\nof this election. Existing themes exist in the ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/agoravoting/agora-gui-common/tree/master/themes"}),"themes directory")," of the agora-gui-common repository. You can write\nyour own if need be, by following the same directory and file structure as any\nof those. The ",Object(l.b)("inlineCode",{parentName:"p"},"default")," theme uses simple colors and not very specific, with\nthe idea of being able to be used in most cases. It is also the most widely used\nand thus battle-tested."),Object(l.b)("h3",{id:"election-presentation-share_text"},"Election Presentation: ",Object(l.b)("inlineCode",{parentName:"h3"},"share_text")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"share_text")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," List<",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"#share-text-object"}),"Share Text"),">"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:"))),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'[\n  {\n    "network": "Twitter",\n    "button_text": "",\n    "social_message": "I have just voted in election __URL__, you can too! #nvotes"\n  },\n  {\n    "network": "Facebook",\n    "button_text": "",\n    "social_message": "__URL__"\n  }\n]\n')),Object(l.b)("p",null,"Describes a series of social network or other kind of links to be shown at the\ntop of the election public website and at the success screen of the voting\nbooth. See ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#share-text"}),"Share Text")," for more details. It can be an empty list."),Object(l.b)("h3",{id:"election-presentation-urls"},"Election Presentation: ",Object(l.b)("inlineCode",{parentName:"h3"},"urls")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"urls")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"List<Election URL>")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"[]"))),Object(l.b)("p",null,"DEPRECATED. Just leave it as an empty list."),Object(l.b)("h3",{id:"election-presentation-theme_css"},"Election Presentation: ",Object(l.b)("inlineCode",{parentName:"h3"},"theme_css")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"theme_css")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'""'))),Object(l.b)("p",null,"DEPRECATED. Just leave it as an empty string."),Object(l.b)("h3",{id:"election-presentation-extra_options"},"Election Presentation: ",Object(l.b)("inlineCode",{parentName:"h3"},"extra_options")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"extra_options")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"#election-presentation-extra-options-object"}),"Election Presentation Extra Options")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "start_screen__skip": true\n}\n')),Object(l.b)("p",null,"A set of additional of election configuration options, currently used to modify\nthe voting booth presentation behaviour. This property is not required, but can\nbe useful. See more\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-presentation-extra-options-object"}),"details about Election Presentation Extra Options here"),"."),Object(l.b)("h2",{id:"share-text-object"},"Share Text Object"),Object(l.b)("p",null,"Object describing a series of social network links or any other type of link\nto be shown at the top of the election public website and at the success screen\nof the voting  booth. It  is used ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-presentation-share_text"}),"here")," and\nit can have the following properties:"),Object(l.b)("h3",{id:"share-text-network"},"Share Text: ",Object(l.b)("inlineCode",{parentName:"h3"},"network")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"network")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'"Twitter"'))),Object(l.b)("p",null,"Specifies the social network this link is for. Currently only ",Object(l.b)("inlineCode",{parentName:"p"},'"Twitter"')," and\n",Object(l.b)("inlineCode",{parentName:"p"},'"Facebook"')," special cases are detected. If you use any of those, then a given\nsocial network icon will be shown and the url will be set to share the\nspecified ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#share-text-social_message"}),"social message"),"."),Object(l.b)("h3",{id:"share-text-button_text"},"Share Text: ",Object(l.b)("inlineCode",{parentName:"h3"},"button_text")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"button_text")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'""'))),Object(l.b)("p",null,"Specifies the text to show with this share link. It's usually set to an empty\nstring as the network icon is usually set."),Object(l.b)("h3",{id:"share-text-social_message"},"Share Text: ",Object(l.b)("inlineCode",{parentName:"h3"},"social_message")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"social_message")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'"I have just voted in election __URL__, you can too! #nvotes"'))),Object(l.b)("p",null,"When users click on the share link, it will try automatically default to share\nin Twitter/Facebook this message. It is a template string, where ",Object(l.b)("inlineCode",{parentName:"p"},"__URL__")," will\nbe automatically replaced to a link to this election's public website."),Object(l.b)("p",null,"Currently unused."),Object(l.b)("h2",{id:"election-presentation-extra-options-object"},"Election Presentation Extra Options Object"),Object(l.b)("p",null,"An object describing a set of additional of election configuration options,\ncurrently used to modify the voting booth presentation behaviour. It is used\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-presentation-extra_options"}),"here")," and it can have the following\nproperties:"),Object(l.b)("h3",{id:"election-presentation-options-start_screen__skip"},"Election Presentation Options: ",Object(l.b)("inlineCode",{parentName:"h3"},"start_screen__skip")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"start_screen__skip")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Boolean")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"true"))),Object(l.b)("p",null,"If set, this optional property will modify the voting booth behaviour and the\nstart screen of the voting booth will not be shown."),Object(l.b)("h3",{id:"election-presentation-options-public_title"},"Election Presentation Options: ",Object(l.b)("inlineCode",{parentName:"h3"},"public_title")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"public_title")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'"Approval of the accounts 2022"'))),Object(l.b)("p",null,"If set, this optional property will modify the voting booth behaviour so that\ninstead of showing the title of election in the voting booth, it will show this\nother title instead."),Object(l.b)("h3",{id:"election-presentation-options-success_screen__hide_ballot_tracker"},"Election Presentation Options: ",Object(l.b)("inlineCode",{parentName:"h3"},"success_screen__hide_ballot_tracker")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"success_screen__hide_ballot_tracker")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Boolean")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"true"))),Object(l.b)("p",null,"If set, this optional property will modify the voting booth behaviour and the\nsuccess screen will not show the ballot tracker hash. This option does not hide\nthe QR code nor the link to download the ballot ticket PDF."),Object(l.b)("h3",{id:"election-presentation-options-success_screen__hide_qr_code"},"Election Presentation Options: ",Object(l.b)("inlineCode",{parentName:"h3"},"success_screen__hide_qr_code")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"success_screen__hide_qr_code")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Boolean")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"true"))),Object(l.b)("p",null,"If set, this optional property will modify the voting booth behaviour and the\nsuccess screen will not show the QR code that encodes a link to the ballot\ntracker URL. This option does not hide the ballot tracker hash nor the link\nto download the ballot ticket PDF."),Object(l.b)("h3",{id:"election-presentation-options-success_screen__hide_download_ballot_ticket"},"Election Presentation Options: ",Object(l.b)("inlineCode",{parentName:"h3"},"success_screen__hide_download_ballot_ticket")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"success_screen__hide_download_ballot_ticket")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Boolean")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"true"))),Object(l.b)("p",null,"If set, this optional property will modify the voting booth behaviour and the\nsuccess screen will not show the link to download the ballot ticket PDF. This\noption does not hide the ballot tracker hash nor the QR code to the ballot\ntracker."),Object(l.b)("h3",{id:"election-presentation-options-success_screen__redirect_to_login"},"Election Presentation Options: ",Object(l.b)("inlineCode",{parentName:"h3"},"success_screen__redirect_to_login")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"success_screen__redirect_to_login")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Boolean")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"true"))),Object(l.b)("p",null,"If set, this optional property will modify the voting booth behaviour so that\nthe success screen will show a link to redirect to the voter login page. Use\ntogether with ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-presentation-options-success_screen__redirect_to_login__text"}),Object(l.b)("inlineCode",{parentName:"a"},"success_screen__redirect_to_login__text")),"\nbecause the link will have that text, so you need to set it."),Object(l.b)("h3",{id:"election-presentation-options-success_screen__redirect_to_login__text"},"Election Presentation Options: ",Object(l.b)("inlineCode",{parentName:"h3"},"success_screen__redirect_to_login__text")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"success_screen__redirect_to_login__text")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Boolean")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Go to login"))),Object(l.b)("p",null,"If set, this optional property will modify the voting booth behaviour so that\nthe redirect to login link in the  success screen will have the text specified\nin this string. Use\ntogether with ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-presentation-options-success_screen__redirect_to_login"}),"success_screen__redirect_to_login"),"\nbecause the link will only appear if that option is set to ",Object(l.b)("inlineCode",{parentName:"p"},"true"),"."),Object(l.b)("h3",{id:"election-presentation-options-disable_voting_booth_audit_ballot"},"Election Presentation Options: ",Object(l.b)("inlineCode",{parentName:"h3"},"disable_voting_booth_audit_ballot")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"disable_voting_booth_audit_ballot")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Boolean")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"true"))),Object(l.b)("p",null,"If set, this optional property will modify the voting booth behaviour so that\nthe review ballot screen, shown before casting the vote, will not show the hash\nof the ballot nor the link to audit the ballot."),Object(l.b)("h3",{id:"election-presentation-options-success_screen__redirect_to_login__auto_seconds"},"Election Presentation Options: ",Object(l.b)("inlineCode",{parentName:"h3"},"success_screen__redirect_to_login__auto_seconds")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"success_screen__redirect_to_login__auto_seconds")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Positive Integer")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"10"))),Object(l.b)("p",null,"If set, this optional property will modify the voting booth behaviour so that\nonce the ballot is cast and the success screen is shown, after the specified\nnumber of seconds the voter will be automatically redirected to the login page."),Object(l.b)("h2",{id:"results-config-pipes"},"Results Config Pipes"),Object(l.b)("p",null,"A results config pipe is used to specify how election results will be calculated.\nResults configuration is set of pipes to be applied, together with each pipe\nconfiguration, that will be used during the  calculation of election results. It\nis configured at the election level with the\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-resultsconfig"}),"resultsConfig setting"),"."),Object(l.b)("p",null,"Each pipe is a list with two items (a pair):"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"The pipe import path"),Object(l.b)("li",{parentName:"ol"},"An object with that specific pipe configuration")),Object(l.b)("p",null,"For example, a config pair could be:"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'[\n  "agora_results.pipes.sort.sort_non_iterative",\n  {\n    "question_indexes": [0]\n  }\n]\n')),Object(l.b)("p",null,"The pipes are interpreted and applied by\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/agoravoting/agora-results"}),"agora-results"),", which in turn is\ncalled by ",Object(l.b)("inlineCode",{parentName:"p"},"agora-elections"),". There are multiple available pipes and we will\ndocument in this section most of them, what they do, what you can use them for\nand what are their configuration  options."),Object(l.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"There's a deployment level configuration setting that specifies a whitelist of\npipes that can be used. This setting's path is\n",Object(l.b)("inlineCode",{parentName:"p"},"config.agora_results.pipes_whitelist")," in the ",Object(l.b)("inlineCode",{parentName:"p"},"config.yml")," ansible\nconfiguration). If you need to use a specific pipe, please ensure you\nhave whitelisted it in the deployment configuration."))),Object(l.b)("h3",{id:"election-results-input"},"Election results input"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"agora-results")," is called with multiple input data:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"The path to the list of votes to be decrypted."),Object(l.b)("li",{parentName:"ul"},"The path to the election results configuration with all the pipes to be run."),Object(l.b)("li",{parentName:"ul"},"The path to the election tally tarball. This tarball is generated by election\nauthorities and contains among other things a file with the list of questions,\nthe different options available for each question, the tally mechanism, etc."),Object(l.b)("li",{parentName:"ul"},"The ",Object(l.b)("inlineCode",{parentName:"li"},"output directory")," where the election tally results in different formats\nshould be written in different files."),Object(l.b)("li",{parentName:"ul"},"The election id."),Object(l.b)("li",{parentName:"ul"},"The path to a file containing the whitelisted pipes.")),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"agora-results")," works by loading the election questions configuration, and\npassing it from pipe to pipe as the first argument of each pipe, called\n",Object(l.b)("inlineCode",{parentName:"p"},"data_list"),". It also untars the election tally tarball in a temporal directory,\nwhich some pipes might use to output some temporal files too."),Object(l.b)("p",null,"In virtual elections, ",Object(l.b)("inlineCode",{parentName:"p"},"agora-results")," not only receives as an input the tarball\nof the virtual election, but also the tarball of all the virtual subelections.\nIn that case, ",Object(l.b)("inlineCode",{parentName:"p"},"agora-results")," will also load that election's question\nconfiguration in the ",Object(l.b)("inlineCode",{parentName:"p"},"data_list")," pipes argument and extract each tally tarball\nin a different temporal directory. This is what allows us to do\nresults consolidation from multiple elections into a single one. In virtual\nelections, the first element in ",Object(l.b)("inlineCode",{parentName:"p"},"data_list")," is the configuration of the virtual\nelection and then follows in order the list of virtual subelections as per the\nconfiguration of the election in ",Object(l.b)("inlineCode",{parentName:"p"},"agora-elections"),". Within each element in\n",Object(l.b)("inlineCode",{parentName:"p"},"data_list")," there's an additional key ",Object(l.b)("inlineCode",{parentName:"p"},"extract_dir")," that pipes can use to\naccess the details of the tally tarball of a specific subelection."),Object(l.b)("h3",{id:"election-results-output"},"Election results output"),Object(l.b)("p",null,"The output of ",Object(l.b)("inlineCode",{parentName:"p"},"agora-results")," is usually directly to stdout in a specific\nformat. This is read by ",Object(l.b)("inlineCode",{parentName:"p"},"agora-elections")," and stored in the database as the\nelectoral results. But it also outputs the same electoral results in different\nformats in the election ",Object(l.b)("inlineCode",{parentName:"p"},"output directory"),": ",Object(l.b)("inlineCode",{parentName:"p"},"csv"),", ",Object(l.b)("inlineCode",{parentName:"p"},"json"),", ",Object(l.b)("inlineCode",{parentName:"p"},"pretty")," (plain\ntext) and ",Object(l.b)("inlineCode",{parentName:"p"},"pdf"),". It will also save the ballots in JSON format in the\n",Object(l.b)("inlineCode",{parentName:"p"},"output directory"),". The ",Object(l.b)("inlineCode",{parentName:"p"},"output directory")," is served with ",Object(l.b)("inlineCode",{parentName:"p"},"agora-elections")," as\na private directory where results can be accessed when the election results are\nnot public, and then as a public directory where anyone can access the election\nresults when the election status is set to ",Object(l.b)("inlineCode",{parentName:"p"},"publish results"),". The results in the\n",Object(l.b)("inlineCode",{parentName:"p"},"output directory")," will contain with the following files:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"<election-id>.results.csv")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"<election-id>.results.json")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"<election-id>.results.pretty")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"<election-id>.results.pdf")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"ballots.csv"))),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"agora-results")," works so that the pipes execute sequentially and communicate\nwith one another mainly through passing information via the mutable ",Object(l.b)("inlineCode",{parentName:"p"},"data_list"),"\nargument and also writting information in the temporal tarball extraction\ndirectories. The final output is the results configuration (which is in\ndifferent formats and files). But one important feature is that it might contain\na list of questions different of that one of the election configuration question\nlist. This is because there are some pipes that can duplicate questions and\nconsolidate electoral results. "),Object(l.b)("h3",{id:"election-results-can-have-different-questions"},"Election results can have different questions"),Object(l.b)("p",null,"For example, it might make sense that if you have an election with ballot boxes\nenabled, you might have only one question in the digital election but that two\ndifferent ballot boxes, one ballot box for Mail-in ballots and another for\nOnsite paper ballots. You could have election results for this election to\ncontain four different tallied questions (even if the election had only one\nquestion):"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"A tally of the digital votes"),Object(l.b)("li",{parentName:"ul"},"A tally of the mail-in votes (from the Mail-in ballots box)"),Object(l.b)("li",{parentName:"ul"},"A tally of the paper ballots (from the Paper ballots box)"),Object(l.b)("li",{parentName:"ul"},"Consolidated results of all the previous ones together")),Object(l.b)("p",null,"To do that, you would also have to change the title of the duplicated questions\nso that you can easily see which question corresponds with which tally. There\nare pipes to do that."),Object(l.b)("p",null,"What follows is a list of the results configuration pipes in no particular\norder:"),Object(l.b)("h3",{id:"pipe-do_tallies"},"Pipe: ",Object(l.b)("inlineCode",{parentName:"h3"},"do_tallies")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Pipe path"),": ",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/results.py#L24"}),Object(l.b)("inlineCode",{parentName:"a"},"agora_results.pipes.results.do_tallies"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example usage"),":")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'"agora_results.pipes.results.do_tallies",\n{\n  "question_indexes": [0]\n}\n')),Object(l.b)("p",null,"This pipe is used to run the ",Object(l.b)("inlineCode",{parentName:"p"},"tally")," algorithm of the election questions. It\nwill calculate the results using that ",Object(l.b)("inlineCode",{parentName:"p"},"tally")," algorithm and set them in the\n",Object(l.b)("inlineCode",{parentName:"p"},"results")," key in the appropiate element inside ",Object(l.b)("inlineCode",{parentName:"p"},"data_list"),", among other things.\n",Object(l.b)("inlineCode",{parentName:"p"},"results")," is used later by ",Object(l.b)("inlineCode",{parentName:"p"},"agora-results")," to output the electoral results in\nthe appropiate format. It also sets the ",Object(l.b)("inlineCode",{parentName:"p"},"log")," key in the appropiate element\ninside ",Object(l.b)("inlineCode",{parentName:"p"},"data_list")," if the tally algorithm generated any log output."),Object(l.b)("p",null,"This pipe calls uses the ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/agoravoting/agora-tally"}),"agora-tally"),"\nlibrary and calls to ",Object(l.b)("inlineCode",{parentName:"p"},"agora_tally.tally.do_tally")," to do the results calculation\nof any question to be tallied."),Object(l.b)("p",null,"Candidates marked as withdrawn (you can do that with the\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#pipe-apply_modifications"}),"apply_modifications pipe")," ) will not be counted\nduring the tally."),Object(l.b)("p",null,"The following configuration options can be set in the pipe configuration object:"),Object(l.b)("h4",{id:"do_tallies-ignore_invalid_votes"},Object(l.b)("inlineCode",{parentName:"h4"},"do_tallies"),": ",Object(l.b)("inlineCode",{parentName:"h4"},"ignore_invalid_votes")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"ignore_invalid_votes")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Boolean")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},"true")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"false"))),Object(l.b)("p",null,"If this option is set to ",Object(l.b)("inlineCode",{parentName:"p"},"true")," as it is by default, having invalid votes will\nnot make the tally fail. If it is set to ",Object(l.b)("inlineCode",{parentName:"p"},"false"),", then the call to\n",Object(l.b)("inlineCode",{parentName:"p"},"agora_tally.tally.do_tally")," will raise an exception and the ",Object(l.b)("inlineCode",{parentName:"p"},"agora-results"),"\nexecution will fail. "),Object(l.b)("p",null,"If you are not expecting any invalid votes, setting ",Object(l.b)("inlineCode",{parentName:"p"},"ignore_invalid_votes")," to\n",Object(l.b)("inlineCode",{parentName:"p"},"false")," might be a way to ensure that you don't overlook any invalid vote."),Object(l.b)("h4",{id:"do_tallies-print_as_csv"},Object(l.b)("inlineCode",{parentName:"h4"},"do_tallies"),": ",Object(l.b)("inlineCode",{parentName:"h4"},"print_as_csv")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"print_as_csv")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Boolean")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},"false")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"true"))),Object(l.b)("p",null,"If this option is set to ",Object(l.b)("inlineCode",{parentName:"p"},"false")," as it is by default, it will output to stdout\nthe ballots as they are read in CSV format. This option is currently unused most\nof the time as the ",Object(l.b)("inlineCode",{parentName:"p"},"agora-results")," already outputs the ballots in CSV format (\nthe ",Object(l.b)("inlineCode",{parentName:"p"},"ballots.csv")," file). By the way, that file is generated by this pipe and\nusing the same code as this setting uses."),Object(l.b)("h4",{id:"do_tallies-tallies_indexes"},Object(l.b)("inlineCode",{parentName:"h4"},"do_tallies"),": ",Object(l.b)("inlineCode",{parentName:"h4"},"tallies_indexes")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"tallies_indexes")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"List<Positive Integer> | None")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},"None")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"[0,1,2,4,6]"))),Object(l.b)("p",null,"List of indexes in ",Object(l.b)("inlineCode",{parentName:"p"},"data_list")," to tally or None if all of them should be\ntallied which is the default. Note that this is a filtering list. It will not\nerror if any index of this list is out of bounds. If this a virtual election\nand ",Object(l.b)("inlineCode",{parentName:"p"},"agora-results")," received 2 tallies as input, if ",Object(l.b)("inlineCode",{parentName:"p"},"tallies_indexes")," is\n",Object(l.b)("inlineCode",{parentName:"p"},"[0,1,2,3]")," it will actually only tally the first two."),Object(l.b)("h4",{id:"do_tallies-question_indexes"},Object(l.b)("inlineCode",{parentName:"h4"},"do_tallies"),": ",Object(l.b)("inlineCode",{parentName:"h4"},"question_indexes")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"question_indexes")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"List<Positive Integer> | None")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},"None")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"[0,1,2]"))),Object(l.b)("p",null,"List of question to tally for each of the tallies being tallied or None if all\nof them should be tallied which is the default. Two notes:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"This is a filtering list. It will not error if any index of this list is out\nof bounds. If there is only a single question but ",Object(l.b)("inlineCode",{parentName:"li"},"question_indexes")," is set to\n",Object(l.b)("inlineCode",{parentName:"li"},"[0,1,2,3,4]"),", this pipe will just tally the first question without any error."),Object(l.b)("li",{parentName:"ul"},"This list of question indexes is applied to all elections. To apply different\n",Object(l.b)("inlineCode",{parentName:"li"},"question_indexes")," for different elections you would have to have in your pipes\nconfiguration multiple calls to the ",Object(l.b)("inlineCode",{parentName:"li"},"do_tallies")," with different settings. See\n",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"#do_tallies-reuse_results"}),"reuse_results")," for some details on that.")),Object(l.b)("h4",{id:"do_tallies-reuse_results"},Object(l.b)("inlineCode",{parentName:"h4"},"do_tallies"),": ",Object(l.b)("inlineCode",{parentName:"h4"},"reuse_results")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"reuse_results")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Boolean")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},"false")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"true"))),Object(l.b)("p",null,"As mentioned before, this pipe heavy lifting is actually done by calling to\n",Object(l.b)("inlineCode",{parentName:"p"},"agora_tally.tally.do_tally"),". This function call receives the question\nconfiguration as an object using the ",Object(l.b)("inlineCode",{parentName:"p"},"question_json")," parameter. Usually this\nconfiguration is obtained by reading the question json file within the tally\ntarball temporal extraction directory. However, if ",Object(l.b)("inlineCode",{parentName:"p"},"reuse_results")," is set to\n",Object(l.b)("inlineCode",{parentName:"p"},"true"),", then the ",Object(l.b)("inlineCode",{parentName:"p"},"question_json")," parameter will be loaded with an object from\nthe given  element inside ",Object(l.b)("inlineCode",{parentName:"p"},"data_list"),":\n",Object(l.b)("inlineCode",{parentName:"p"},"data_list[<index>]['results']['questions']"),"."),Object(l.b)("p",null,"This can be useful in different circumstances. For example if for some reason\nlike the one mentioned in ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#do_tallies-question_indexes"}),"question_indexes"),", you\nneed to execute multiple runs of this pipe within the same ",Object(l.b)("inlineCode",{parentName:"p"},"agora-results"),"\nexecution."),Object(l.b)("h4",{id:"do_tallies-allow_empty_tally"},Object(l.b)("inlineCode",{parentName:"h4"},"do_tallies"),": ",Object(l.b)("inlineCode",{parentName:"h4"},"allow_empty_tally")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"allow_empty_tally")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Boolean")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},"false")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"true"))),Object(l.b)("p",null,"If set to ",Object(l.b)("inlineCode",{parentName:"p"},"true")," (the default is ",Object(l.b)("inlineCode",{parentName:"p"},"false"),"), the tally will not fail even if there\nis an empty list of ballots being tallied."),Object(l.b)("h4",{id:"do_tallies-help"},Object(l.b)("inlineCode",{parentName:"h4"},"do_tallies"),": ",Object(l.b)("inlineCode",{parentName:"h4"},"help")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"help")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},'""')),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'"Some explanation"'))),Object(l.b)("p",null,"Most if not all of the pipes receive the ",Object(l.b)("inlineCode",{parentName:"p"},"help")," argument. This is a way for the\nwritter of the results configuration pipes to explain anything relating to this\nparticular pipe + pipe configuration pair, as usually configuration is in JSON\nformat which does not allow for comments."),Object(l.b)("h3",{id:"pipe-sort_non_iterative"},"Pipe: ",Object(l.b)("inlineCode",{parentName:"h3"},"sort_non_iterative")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Pipe path"),": ",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/sort.py#L35"}),Object(l.b)("inlineCode",{parentName:"a"},"agora_results.pipes.sort.sort_non_iterative"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example usage"),":")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'"agora_results.pipes.sort.sort_non_iterative",\n{\n  "question_indexes": [0, 1]\n}\n')),Object(l.b)("p",null,"Pipe used to sort the answers in ",Object(l.b)("inlineCode",{parentName:"p"},"data_list[<index>]['results']['questions'][<index2>]['answers']"),"\nand assigning a ",Object(l.b)("inlineCode",{parentName:"p"},"winner_position")," depending on the question's ",Object(l.b)("inlineCode",{parentName:"p"},"num_winners"),"\nsetting. This sort is by answer points (the answer's ",Object(l.b)("inlineCode",{parentName:"p"},"total_count")," property)\nand thus is only applied for questions whose ",Object(l.b)("inlineCode",{parentName:"p"},"tally_type")," algorithm is\nnon-iterative, like ",Object(l.b)("inlineCode",{parentName:"p"},"plurality-at-large")," or ",Object(l.b)("inlineCode",{parentName:"p"},"borda"),". The answer list will be\nreordered to ensure that winners always appears before other candidates, and\ncan also be used for tie resolution using the ",Object(l.b)("inlineCode",{parentName:"p"},"ties_sorting")," argument."),Object(l.b)("p",null,"A Single-Transferable Vote (STV) tally method uses an iterative process to\nobtain winners so results cannot be sorted by this pipe. This pipe uses a\n",Object(l.b)("inlineCode",{parentName:"p"},"tally_type")," whitelist to ensure it is only applied for non-iterative tally\nmethods, simply skipping any other question with any other tally method."),Object(l.b)("p",null,"This pipe also takes into account during sorting candidate withdrawals and can\napply specific withdrawls at this stage using the ",Object(l.b)("inlineCode",{parentName:"p"},"withdrawals")," option, or\napply the ",Object(l.b)("inlineCode",{parentName:"p"},"withdrawals")," of candidate options that were recorded as withdrawn by\na previous pipe (like the\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#pipe-apply_modifications"}),"apply_modifications pipe"),")."),Object(l.b)("p",null,"This pipe can be used to apply candidate removals, which means that a candidate\noption will not appear in the election results. "),Object(l.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"Different forms of withdrawal")),Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"Multiple withdrawal methods are available and it's your responsability to know\nthem and use them as required."),Object(l.b)("p",{parentName:"div"},"When a candidate is withdrawed for example using the\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#pipe-apply_modifications"}),"apply_modifications pipe"),", if that withdrawal is\nmarked as such before executing  the ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#pipe-do_tallies"}),"do_tallies pipe"),", then\nthe candidate option will not be counted. If after ",Object(l.b)("inlineCode",{parentName:"p"},"do_tallies")," you execute\nthe ",Object(l.b)("inlineCode",{parentName:"p"},"sort_non_iterative")," pipe, then it will also ensure it is not marked as a\nwinner. Note that the ordering of the pipes matter: if you apply the withdrawal\nwith ",Object(l.b)("inlineCode",{parentName:"p"},"apply_modifications")," after having run ",Object(l.b)("inlineCode",{parentName:"p"},"do_tallies")," and having\n",Object(l.b)("inlineCode",{parentName:"p"},"sort_non_iterative")," as the last applied pipe (So the order of pipes is\n",Object(l.b)("inlineCode",{parentName:"p"},"[do_tallies, apply_modifications, sort_non_iterative]"),"), the candidate will\nnot appear as a winner because ",Object(l.b)("inlineCode",{parentName:"p"},"sort_non_iterative")," will detect that it's\nwithdrawed, but it will have the same number of points in the election results\nas it was not marked as withdrawed when the ",Object(l.b)("inlineCode",{parentName:"p"},"do_tallies")," was executed."),Object(l.b)("p",{parentName:"div"},"The ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#pipe-apply_modifications"}),"apply_modifications pipe")," can withdraw a\ncandidate but it can also directly be withdrawn by this ",Object(l.b)("inlineCode",{parentName:"p"},"sort_non_iterative"),"\npipe, but then the points obtained will not change because the expected previous\ncall to the ",Object(l.b)("inlineCode",{parentName:"p"},"do_tallies")," pipe will not have been marked the candidate as\nwithdrawed. "))),Object(l.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"Candidate Withdrawal vs Removal")),Object(l.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"There are important differences between candidate removal and withdrawal. The\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#pipe-apply_modifications"}),"apply_modifications pipe")," can be used to mark a\ncandidate option as either withdrawed or Removed. When a candidate is marked as\nremoved, the ",Object(l.b)("inlineCode",{parentName:"p"},"sort_non_iterative")," pipe will remove the candidate option from\nthe election results. "),Object(l.b)("p",{parentName:"div"},"If you don't need to sort the results, candidate removal can be also applied\ndirectly with the ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#pipe-apply_removals"}),"apply_removals pipe"),". And of course,\nremember that you can do both a withdrawal and removal, so that the candidate\noption is both not counted and removed from the election results."))),Object(l.b)("p",null,"The following configuration options can be set in the pipe configuration object:"),Object(l.b)("h4",{id:"sort_non_iterative-tallies_indexes"},Object(l.b)("inlineCode",{parentName:"h4"},"sort_non_iterative"),": ",Object(l.b)("inlineCode",{parentName:"h4"},"tallies_indexes")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"tallies_indexes")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"List<Positive Integer> | None")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},"[0]")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"[0,1,2,4,6]"))),Object(l.b)("p",null,"List of indexes in ",Object(l.b)("inlineCode",{parentName:"p"},"data_list")," to which this pipe will be applied or None if\nthis pipe should be run for all the elections. Note that this is a filtering\nlist. It will not give any error if any index of this list is out of bounds.\nIf this a virtual election and ",Object(l.b)("inlineCode",{parentName:"p"},"agora-results")," received 2 elections as input,\nif ",Object(l.b)("inlineCode",{parentName:"p"},"tallies_indexes")," is ",Object(l.b)("inlineCode",{parentName:"p"},"[0,1,2,3]")," this pipe will just run for the first two."),Object(l.b)("h4",{id:"sort_non_iterative-question_indexes"},Object(l.b)("inlineCode",{parentName:"h4"},"sort_non_iterative"),": ",Object(l.b)("inlineCode",{parentName:"h4"},"question_indexes")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"question_indexes")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"List<Positive Integer> | None")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},"None")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"[0,1,2]"))),Object(l.b)("p",null,"List of question indexes to which this pipe should be applied or None if this\npipe should be run for all the questions of all the elections to which this pipe\nis being run, which is the default. Two notes:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"This is a filtering list. It will not error if any index of this list is out\nof bounds. If there is only a single question but ",Object(l.b)("inlineCode",{parentName:"li"},"question_indexes")," is set to\n",Object(l.b)("inlineCode",{parentName:"li"},"[0,1,2,3,4]"),", this pipe will just run for the first question without any error."),Object(l.b)("li",{parentName:"ul"},"This list of question indexes is applied to all elections. To apply different\n",Object(l.b)("inlineCode",{parentName:"li"},"question_indexes")," for different elections you would have to include in your\npipes configuration multiple calls to this pipe with different settings.")),Object(l.b)("h4",{id:"sort_non_iterative-withdrawals"},Object(l.b)("inlineCode",{parentName:"h4"},"sort_non_iterative"),": ",Object(l.b)("inlineCode",{parentName:"h4"},"withdrawals")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"withdrawals")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"List<AnswerItems>")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},"None")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'[\n  {\n    "answer_id": 0,\n    "answer_text": "John Doe for President",\n    "question_index": 0\n  }\n]\n')),Object(l.b)("p",null,"List of Answers to withdraw. "),Object(l.b)("p",null,"Note that other pipes might indicate also answers that need to be withdrawn,\nwith the same format as this list, in the\n",Object(l.b)("inlineCode",{parentName:"p"},"data_list[<index>]['withdrawals']"),". Both lists are joined for this purpose."),Object(l.b)("p",null,"Each ",Object(l.b)("inlineCode",{parentName:"p"},"AnswerItem")," is an object that requires the following properties:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"question_index"),": The question index."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"answer_id"),": The answer id."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"answer_text"),": The answer text, for sanity checks.")),Object(l.b)("p",null,"Withdrawed candidates will appear in the election results, but they will never\nappear as a winner. "),Object(l.b)("h4",{id:"sort_non_iterative-ties_sorting"},Object(l.b)("inlineCode",{parentName:"h4"},"sort_non_iterative"),": ",Object(l.b)("inlineCode",{parentName:"h4"},"ties_sorting")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"ties_sorting")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"List<TieAnswerItems>")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},"[]")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'[\n  {\n    "answer_id": 0,\n    "answer_text": "John Doe for President",\n    "question_index": 0,\n    "tie_sort": 0\n  },\n  {\n    "answer_id": 1,\n    "answer_text": "Juanito for President",\n    "question_index": 0,\n    "tie_sort": 1\n  }\n]\n')),Object(l.b)("p",null,"When two candidate options are in a tie, you might need to apply an external\nprocedure to resolve this tie. Once this procedure has been applied, then you\ncan use this argument to specify how the tie should be resolved."),Object(l.b)("p",null,"This argument receives a list of ",Object(l.b)("inlineCode",{parentName:"p"},"TieAnswerItems"),". "),Object(l.b)("p",null,"Each ",Object(l.b)("inlineCode",{parentName:"p"},"TieAnswerItems")," is an object that requires the following properties:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"question_index"),": The question index."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"answer_id"),": The answer id."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"answer_text"),": The answer text, for sanity checks."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"tie_sort"),": Integer number used for resolving the tie during sorting. If there\nis a tie between two candidates, the candidate with the lowest ",Object(l.b)("inlineCode",{parentName:"li"},"tie_sort")," number\nwins.")),Object(l.b)("h4",{id:"sort_non_iterative-help"},Object(l.b)("inlineCode",{parentName:"h4"},"sort_non_iterative"),": ",Object(l.b)("inlineCode",{parentName:"h4"},"help")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"help")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," No"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," ",Object(l.b)("inlineCode",{parentName:"li"},'""')),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'"Some explanation"'))),Object(l.b)("p",null,"Most if not all of the pipes receive the ",Object(l.b)("inlineCode",{parentName:"p"},"help")," argument. This is a way for the\nwritter of the results configuration pipes to explain anything relating to this\nparticular pipe + pipe configuration pair, as usually configuration is in JSON\nformat which does not allow for comments."),Object(l.b)("h3",{id:"other-pipes"},"Other pipes"),Object(l.b)("p",null,"There are many other pipes but we have yet to document them. The easiest way\nright now to understand how they work is to just look at the code:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/duplicate_questions.py#L24"}),"agora_results.pipes.duplicate_questions.duplicate_questions")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/modifications.py"}),"agora_results.pipes.modifications.apply_modifications")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/multipart.py"}),"agora_results.pipes.multipart.make_multipart")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/multipart.py"}),"agora_results.pipes.multipart.election_max_size_corrections")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/multipart.py"}),"agora_results.pipes.multipart.question_totals_with_corrections")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/multipart.py"}),"agora_results.pipes.multipart.reduce_answers_with_corrections")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/multipart.py"}),"agora_results.pipes.multipart.multipart_tally_plaintexts_append_joiner")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/multipart.py"}),"agora_results.pipes.multipart.data_list_reverse")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/multipart.py"}),"agora_results.pipes.multipart.multipart_tally_plaintexts_joiner")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/multipart.py"}),"agora_results.pipes.multipart.append_ballots")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/parity.py"}),"agora_results.pipes.parity.proportion_rounded")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/parity.py"}),"agora_results.pipes.parity.parity_zip_non_iterative")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/parity.py"}),"agora_results.pipes.parity.reorder_winners")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/parity.py"}),"agora_results.pipes.parity.podemos_parity_loreg_zip_non_iterative")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/parity.py"}),"agora_results.pipes.parity.podemos_parity2_loreg_zip_non_iterative")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/podemos.py"}),"agora_results.pipes.podemos.podemos_proportion_rounded_and_duplicates")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/desborda4.py"}),"agora_results.pipes.desborda4.podemos_desborda4")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/desborda3.py"}),"agora_results.pipes.desborda3.podemos_desborda3")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/desborda2.py"}),"agora_results.pipes.desborda2.podemos_desborda2")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/desborda.py"}),"agora_results.pipes.desborda.podemos_desborda")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/pretty_print.py"}),"agora_results.pipes.pretty_print.pretty_print_stv_winners")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/pretty_print.py"}),"agora_results.pipes.pretty_print.pretty_print_not_iterative")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/results.py"}),"agora_results.pipes.results.to_files")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/results.py"}),"agora_results.pipes.results.apply_removals")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/stv_tiebreak.py"}),"agora_results.pipes.stv_tiebreak.stv_first_round_tiebreak")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/pdf.py"}),"agora_results.pipes.pdf.configure_pdf")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/withdraw_candidates.py"}),"agora_results.pipes.withdraw_candidates.withdraw_candidates")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/ballot_boxes.py#L278"}),"agora_results.pipes.ballot_boxes.count_tally_sheets"))),Object(l.b)("h2",{id:"census-object"},"Census object"),Object(l.b)("p",null,"This JSON object type describes census configuration related to the election.\nIt is used by the ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-census"}),"census property")," and can have the\nfollowing properties:"),Object(l.b)("h3",{id:"census-voters"},"Census: ",Object(l.b)("inlineCode",{parentName:"h3"},"voters")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"voters")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," List<",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"#voter-object"}),"Voter"),">"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'[\n  {\n    "metadata": {\n      "email": "john@example.com",\n      "name": "John"\n    }\n  },\n  {\n    "metadata": {\n      "email": "marta@example.com",\n      "name": "Marta"\n    }\n  }\n]\n')),Object(l.b)("p",null,"It's a list of voters to be loaded. Each voter is an object with their\nproperties set within the ",Object(l.b)("inlineCode",{parentName:"p"},"metadata")," field. Which voter properties are valid\ndepends on the ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#census-auth_method"}),"authentication method")," used and the\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#census-extra_fields"}),"extra fields")," defined."),Object(l.b)("p",null,"If the census size if big, it's not advisable to set it using this field\nbecause it's currently not very fast. In that case it's best to use the\n",Object(l.b)("inlineCode",{parentName:"p"},"authapi"),"'s ",Object(l.b)("inlineCode",{parentName:"p"},"bulk_insert_voters")," management command through the command line\nwhich can easily load 4,000 voters/second instead of maybe 6-10 voters/second\nhere."),Object(l.b)("p",null,"You can also modify the census later when the election is created. If you use\nthe admin user interface, it will use the same backend as it used during\nelection creation here and thus the same speed recommendations apply."),Object(l.b)("p",null,"Note that when loading voters using this API, voters are uniquely identified by\na different field depending on the ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#census-auth_method"}),"authentication method"),",\nfor example the ",Object(l.b)("inlineCode",{parentName:"p"},"email")," field if using the ",Object(l.b)("inlineCode",{parentName:"p"},"email-otp")," authentication method.\nIf you reupload a census, the voters that already exist (matching their unique\nid) won't be modified. "),Object(l.b)("p",null,"However if you use ",Object(l.b)("inlineCode",{parentName:"p"},"authapi"),"'s ",Object(l.b)("inlineCode",{parentName:"p"},"bulk_insert_voters")," management command, this\nkind of detection won't be applied. If you need to update the census, it's best\nto first remove all the census with the ",Object(l.b)("inlineCode",{parentName:"p"},"bulk_delete_voters")," command before\nexecuting ",Object(l.b)("inlineCode",{parentName:"p"},"bulk_insert_voters"),"."),Object(l.b)("p",null,"If the election is a parent election, you usually set the census within the\nparent election and there assign to which children elections can that specific\nvoter vote. To do so, set the ",Object(l.b)("inlineCode",{parentName:"p"},"children_event_id_list")," property within the\n",Object(l.b)("inlineCode",{parentName:"p"},"metadata")," field of each voter."),Object(l.b)("h3",{id:"census-auth_method"},"Census: ",Object(l.b)("inlineCode",{parentName:"h3"},"auth_method")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"auth_method")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Short String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},"sms-otp"))),Object(l.b)("p",null,"This property specifies which is the main authentication method related to the\nelection. The list of currently available authentication methods is:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"email"),": The user will be authenticate through a code sent via email.\nThe email is sent by the adminstrators to voters using the ",Object(l.b)("inlineCode",{parentName:"p"},"Send authentication"),"\noption in the Election Dashboard or the ",Object(l.b)("inlineCode",{parentName:"p"},"Send auth codes")," to specific voters\noption in the election ",Object(l.b)("inlineCode",{parentName:"p"},"Census Data")," sidebar option. If used, an\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#census-extra_fields"}),"extra_field")," of type ",Object(l.b)("inlineCode",{parentName:"p"},"email")," and named ",Object(l.b)("inlineCode",{parentName:"p"},"email")," is\nrequired.")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"email-otp"),": The user will authenticate through an OTP (One Time Password)\nsent via email. This OTP is not sent to voters by administrators, but instead\nis requested by voters during the authentication process each time they execute\nit. If used, an ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#census-extra_fields"}),"extra_field")," of type ",Object(l.b)("inlineCode",{parentName:"p"},"email")," and named\n",Object(l.b)("inlineCode",{parentName:"p"},"email")," is  required.")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"sms"),": The user will be authenticate through a code sent via SMS.\nThe SMS is sent by the adminstrators to voters using the ",Object(l.b)("inlineCode",{parentName:"p"},"Send authentication"),"\noption in the Election Dashboard or the ",Object(l.b)("inlineCode",{parentName:"p"},"Send auth codes")," to specific voters\noption in the election ",Object(l.b)("inlineCode",{parentName:"p"},"Census Data")," sidebar option. If used, an\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#census-extra_fields"}),"extra_field")," of type ",Object(l.b)("inlineCode",{parentName:"p"},"tlf")," and named ",Object(l.b)("inlineCode",{parentName:"p"},"tlf")," is\nrequired.")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"sms-otp"),": The user will authenticate through an OTP (One Time Password)\nsent via SMS. This OTP is not sent to voters by administrators, but instead is\nrequested by voters during the authentication process each time they execute it.\nIf used, an ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#census-extra_fields"}),"extra_field")," of type ",Object(l.b)("inlineCode",{parentName:"p"},"tlf")," and named\n",Object(l.b)("inlineCode",{parentName:"p"},"tlf")," is required.")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"openid-connect"),": The authentication will happen through a third-party\nopenid provider. This provider shall be configured in the ",Object(l.b)("inlineCode",{parentName:"p"},"config.yml"),"\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"/admin-manual/docs/deployment/guide"}),"ansible deployment configuration"),". If used, an\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#census-extra_fields"}),"extra_field")," of type ",Object(l.b)("inlineCode",{parentName:"p"},"sub")," and named ",Object(l.b)("inlineCode",{parentName:"p"},"text")," is\nrequired.")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"user-and-password"),": The voters will authenticate simply by the username\nand password. You can assign the ",Object(l.b)("inlineCode",{parentName:"p"},"password")," field of each voter appropiately.\nThis is usually not recommended, as by default voters are assigned a random\nusername so it's difficult for them to know their username. The only usecase for\nthis is currently for the administrative ",Object(l.b)("inlineCode",{parentName:"p"},"AuthEvent")," (usually with id ",Object(l.b)("inlineCode",{parentName:"p"},"0"),") used\nto authenticate in the administrative interface, and whose list of users is\ndirectly set within the ",Object(l.b)("inlineCode",{parentName:"p"},"config.yml"),"\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"/admin-manual/docs/deployment/guide"}),"ansible deployment configuration")," using the\n",Object(l.b)("inlineCode",{parentName:"p"},"config.authapi.upsert_file")," and the superadmin user\n(",Object(l.b)("inlineCode",{parentName:"p"},"config.authapi.admin_user"),"). If used, an ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#census-extra_fields"}),"extra_field"),"\nof type ",Object(l.b)("inlineCode",{parentName:"p"},"password")," and named ",Object(l.b)("inlineCode",{parentName:"p"},"password")," is required.")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"email-and-password"),": The voters will authenticate simply by the email\nand password. You can assign the ",Object(l.b)("inlineCode",{parentName:"p"},"password")," field of each voter appropiately.\nIf used, an ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#census-extra_fields"}),"extra_field")," of type ",Object(l.b)("inlineCode",{parentName:"p"},"password")," and named\n",Object(l.b)("inlineCode",{parentName:"p"},"password")," is required.")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"dnie"),": The voters will authenticate using a TLS client authentication\ncertificate. This authentication method requires some updates to be usable in\nthe current version of the software and thus is currently not usable, but it\ndoes not require much development work to make it work."))),Object(l.b)("h3",{id:"census-census"},"Census: ",Object(l.b)("inlineCode",{parentName:"h3"},"census")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"census")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," ",Object(l.b)("inlineCode",{parentName:"li"},"Short String")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ",Object(l.b)("inlineCode",{parentName:"li"},'"close"'))),Object(l.b)("p",null,"Indicates if the census is either ",Object(l.b)("inlineCode",{parentName:"p"},'"open"')," or ",Object(l.b)("inlineCode",{parentName:"p"},'"close"'),". If census is ",Object(l.b)("inlineCode",{parentName:"p"},'"open"'),",\nit means it is in open registration mode and voters can register themselves,\nfill the ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#census-extra_fields"}),"extra_fields")," required on registration to be\nable to vote later either at that moment if the election is open or later on."),Object(l.b)("h3",{id:"census-extra_fields"},"Census: ",Object(l.b)("inlineCode",{parentName:"h3"},"extra_fields")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Property name"),": ",Object(l.b)("inlineCode",{parentName:"li"},"extra_fields")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Type:")," List<",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"#extra-field-object"}),"Extra Field"),">"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Required:")," Yes"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Default:")," -"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Example:")," ")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'[\n  {\n    "must": true,\n    "name": "email",\n    "type": "email",\n    "required": true,\n    "min": 2,\n    "max": 200,\n    "required_on_authentication": true\n  }\n]\n')),Object(l.b)("p",null,"Defines authentication fields that the voters might fill or with some relation\nto voters. There are some ",Object(l.b)("inlineCode",{parentName:"p"},"extra_fields")," required depending on the election's\n",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#election-auth_method"}),"auth_method"),". For example, if the authentication method\nis ",Object(l.b)("inlineCode",{parentName:"p"},"sms-otp"),", the extra field named ",Object(l.b)("inlineCode",{parentName:"p"},"tlf")," and of type ",Object(l.b)("inlineCode",{parentName:"p"},"tlf")," is required. "),Object(l.b)("p",null,"See ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"#extra-field-object"}),"Extra Field")," for more details about extra fields."))}c.isMDXComponent=!0},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),i=n.n(a);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var b=i.a.createContext({}),c=function(e){var t=i.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return i.a.createElement(b.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},u=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,o=e.parentName,b=s(e,["components","mdxType","originalType","parentName"]),p=c(n),u=a,m=p["".concat(o,".").concat(u)]||p[u]||d[u]||l;return n?i.a.createElement(m,r(r({ref:t},b),{},{components:n})):i.a.createElement(m,r({ref:t},b))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=u;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:a,o[1]=r;for(var b=2;b<l;b++)o[b]=n[b];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);